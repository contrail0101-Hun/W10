<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ë‹¨ì–´ ì‚¬ê²©ì¥</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
/* ============ ê¸°ë³¸ í°íŠ¸ & ë¶„ìœ„ê¸° ============ */
body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(to bottom, #5e6368 0%, #3a3f44 60%, #2b2e32 100%);
  position: relative;
  overflow: hidden;
  font-family: Impact, "Arial Black", system-ui, sans-serif;
  letter-spacing: 0.02em;
}
body::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: radial-gradient(rgba(255,255,255,0.04) 1px, transparent 1px);
  background-size: 25px 25px;
  opacity: 0.35;
  z-index: 0;
}
body::after {
  content: "";
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 40%;
  background: linear-gradient(to top, rgba(0,0,0,0.4), transparent);
  z-index: 0;
}

/* ============ ê²Œì„ ì»¨í…Œì´ë„ˆ ============ */
.game-container {
  background: rgba(255,255,255,0.92);
  width: 92%;
  max-width: 980px;
  padding: 20px 20px 50px 20px;
  border-radius: 14px;
  box-shadow: 0 0 0 3px #bbb, 4px 4px 0 0 #777;
  position: relative;
  z-index: 3;
}
.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 18px;
  gap: 10px;
}
.title {
  font-size: 1.35rem;
  font-weight: 700;
  text-shadow: 1px 1px 0 #000, -1px -1px 0 rgba(0,0,0,0.4);
}
.info-box {
  background: #fff;
  padding: 6px 12px;
  border-radius: 6px;
  box-shadow: 0 0 0 2px #aaa;
  font-size: 0.85rem;
  text-shadow: 0.5px 0.5px 0 rgba(0,0,0,0.25);
}
.question-box {
  background: #fff;
  text-align: center;
  padding: 16px 10px;
  border-radius: 10px;
  margin-bottom: 15px;
  box-shadow: 0 0 0 2px #aaa;
  min-height: 60px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1.1rem;
  font-weight: 600;
  text-shadow: 0.5px 0.5px 0 rgba(0,0,0,0.25);
}

/* ============ ê³¼ë…: ê°€ë¡œ ë°°ì—´ ============ */
.range-area {
  display: flex;
  gap: 16px;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  overflow-x: auto;
  padding-bottom: 6px;
}
.target {
  flex: 0 0 auto;
  width: 180px;
  height: 180px;
  border-radius: 50%;
  background: radial-gradient(circle,
    red 0 10%,
    white 10% 20%,
    black 20% 30%,
    white 30% 40%,
    black 40% 50%,
    white 50% 100%);
  box-shadow: 0 0 14px rgba(0,0,0,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: transform 0.1s ease, opacity 0.2s ease;
  position: relative;
}
.target:hover {
  transform: scale(1.04);
}
.target-text {
  background: rgba(255,255,255,0.95);
  padding: 6px 10px;
  border-radius: 10px;
  font-weight: 700;
  font-size: 1.35rem;
  text-align: center;
  color: #103760;
  text-shadow: 0 0 3px rgba(255,255,255,0.8);
}

/* ============ í•˜ë‹¨ ============ */
.bottom { text-align: center; margin-top: 10px; }
.main-btn {
  background: #ffca6b;
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 0 0 2px #cfa25d, 2px 2px 0 0 #9c8049;
  margin-bottom: 12px;
}
.main-btn:disabled { opacity: 0.55; cursor: not-allowed; }
.message { min-height: 36px; font-weight: 700; color:#222; }
.flash-message { animation: fadeInOut 2s ease; }
@keyframes fadeInOut {
  0% { opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { opacity: 0; }
}

/* ============ ë¶ˆê½ƒ/ì´ëª¨ì§€ ============ */
.fireworks-container {
  position: fixed;
  top:50%; left:50%;
  width:180px; height:180px;
  transform:translate(-50%,-50%);
  pointer-events:none; z-index:999;
}
.firework {
  position:absolute;
  width:12px; height:12px;
  background:#ffcc00;
  border-radius:50%;
  animation:explode 1.2s ease-out forwards;
}
@keyframes explode {
  0% { transform:translate(0,0) scale(1); opacity:1; }
  100% { transform:translate(var(--tx),var(--ty)) scale(0); opacity:0; }
}
.cry-emoji {
  position:fixed; top:55%; left:50%;
  transform:translate(-50%, -50%);
  font-size:3rem;
  animation:fadeInOut 2s ease;
  pointer-events:none; z-index:999;
}

/* ============ FPS M4 ì´ ============ */
.fps-gun {
  position:fixed;
  bottom:-10px;
  right:-20px;
  width:240px;
  height:240px;
  pointer-events:none;
  z-index:2;
  animation:gunBob 3s ease-in-out infinite;
  transform-origin:bottom right;
}
@keyframes gunBob {
  0% { transform:translateY(0) rotate(0deg); }
  50% { transform:translateY(-5px) rotate(1deg); }
  100% { transform:translateY(0) rotate(0deg); }
}
.m4-body {
  position:absolute;
  bottom:0;
  right:0;
  width:210px;
  height:70px;
  background:linear-gradient(120deg,#1c1f25,#2e3a45);
  border-radius:15px 0 0 15px;
  box-shadow:inset 2px 0 0 rgba(255,255,255,0.1), 0 0 3px rgba(0,0,0,0.5);
}
.m4-handle {
  position:absolute;
  bottom:0;
  right:40px;
  width:50px;
  height:70px;
  background:linear-gradient(#2e2e2e,#141414);
  transform:skewX(-10deg);
  border-radius:0 0 10px 10px;
  box-shadow:inset 0 -2px 0 rgba(255,255,255,0.05);
}
.m4-mag {
  position:absolute;
  bottom:0;
  right:90px;
  width:30px;
  height:50px;
  background:linear-gradient(#3a3a3a,#222);
  border-radius:5px;
  transform:skewY(-10deg);
  box-shadow:inset 0 -2px rgba(255,255,255,0.05);
}
.m4-barrel {
  position:absolute;
  bottom:45px;
  right:200px;
  width:100px;
  height:16px;
  background:#111;
  border-radius:8px 0 0 8px;
  box-shadow:inset 3px 0 rgba(255,255,255,0.12);
}
.m4-rear-sight {
  position:absolute;
  bottom:70px;
  right:180px;
  width:18px;
  height:20px;
  background:#222;
  border-radius:2px;
  box-shadow:inset 0 2px rgba(255,255,255,0.1);
}
.m4-front-sight {
  position:absolute;
  bottom:58px;
  right:282px;
  width:12px;
  height:24px;
  background:#222;
  border-radius:2px;
  box-shadow:inset 0 2px rgba(255,255,255,0.1);
}
.m4-hand {
  position:absolute;
  bottom:0;
  right:30px;
  width:90px;
  height:60px;
  background:linear-gradient(#e6b88a,#d49b63);
  border-radius:40px 40px 0 0;
  box-shadow:0 0 0 2px rgba(217,150,100,0.6);
  transform:translateY(2px);
}

/* ì´êµ¬ í™”ì—¼ */
.muzzle-flash {
  position: fixed;
  width: 70px;
  height: 70px;
  background: radial-gradient(circle, rgba(255,240,160,1) 0%, rgba(255,140,0,0.6) 50%, rgba(255,140,0,0) 70%);
  pointer-events: none;
  transform: translate(-50%, -50%) rotate(10deg);
  animation: flashHide 0.18s ease-out forwards;
  z-index: 999;
  filter: drop-shadow(0 0 12px rgba(255,180,0,0.9));
}
@keyframes flashHide {
  from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  to { opacity: 0; transform: translate(-50%, -50%) scale(1.5); }
}

/* ì˜¤ë‹µ: ë¹—ë‚˜ê°€ëŠ” ì´ì•Œ */
.bullet-miss {
  position: fixed;
  width: 14px;
  height: 4px;
  background: #fffbcc;
  border-radius: 4px;
  box-shadow: 0 0 5px rgba(255,250,200,0.9);
  transform-origin: center;
  animation: bulletMiss 0.55s linear forwards;
  z-index: 900;
}
@keyframes bulletMiss {
  0% { transform: translate(0,0) rotate(-8deg); opacity: 1; }
  100% { transform: translate(-140vw, -20px) rotate(-8deg); opacity: 0; }
}

/* ì •ë‹µ: ëª©í‘œë¬¼ë¡œ ë‚ ì•„ê°€ëŠ” ì´ì•Œ (ìœ„ì¹˜ë§Œ JSë¡œ ì¡°ì •) */
.bullet-hit {
  position: fixed;
  width: 14px;
  height: 4px;
  background: #fff1a3;
  border-radius: 4px;
  box-shadow: 0 0 6px rgba(255,245,180,0.85);
  transform-origin: left center;
  z-index: 950;
  /* transitionì€ JSì—ì„œ ë„£ìŒ */
}

/* ê¹¨ì§€ëŠ” íŒŒí¸ */
.shatter-piece {
  position: fixed;
  width: 16px;
  height: 16px;
  background: #fff;
  border: 1px solid #b00;
  border-radius: 3px;
  z-index: 1000;
  animation: shatterFly 0.6s ease-out forwards;
}
@keyframes shatterFly {
  0% { opacity: 1; transform: translate(0,0) rotate(0deg); }
  100% { opacity: 0; transform: translate(var(--dx), var(--dy)) rotate(120deg); }
}

@media (max-width:640px){
  .target { width: 150px; height: 150px; }
  .target-text { font-size: 1.15rem; }
  .fps-gun { width: 200px; height: 200px; }
}
</style>
</head>
<body>
  <div class="game-container">
    <div class="top-bar">
      <div class="title">ë‹¨ì–´ ì‚¬ê²©ì¥</div>
      <div class="info-box" id="timer">ë‚¨ì€ ì‹œê°„: 10ì´ˆ</div>
      <div class="info-box" id="score">ì ìˆ˜: 0</div>
    </div>
    <div class="question-box" id="questionBox">ê²Œì„ì„ ì‹œì‘í•´ì£¼ì„¸ìš” :)</div>

    <!-- ê°€ë¡œ ë°°ì—´ ê³¼ë… -->
    <div class="range-area">
      <div class="target" data-idx="0"><div class="target-text">ì„ ì§€ 1</div></div>
      <div class="target" data-idx="1"><div class="target-text">ì„ ì§€ 2</div></div>
      <div class="target" data-idx="2"><div class="target-text">ì„ ì§€ 3</div></div>
      <div class="target" data-idx="3"><div class="target-text">ì„ ì§€ 4</div></div>
    </div>

    <div class="bottom">
      <button class="main-btn" id="startBtn">ê²Œì„ ì‹œì‘</button>
      <div class="message" id="messageBox"></div>
    </div>
  </div>

  <!-- FPS ì´ê¸° -->
  <div class="fps-gun">
    <div class="m4-barrel"></div>
    <div class="m4-front-sight"></div>
    <div class="m4-rear-sight"></div>
    <div class="m4-body"></div>
    <div class="m4-mag"></div>
    <div class="m4-handle"></div>
    <div class="m4-hand"></div>
  </div>

<script>
const WORDS = [
  { ko:"ì²­ì†Œ", en:"clean" },{ ko:"ì—„ê²©í•œ", en:"strict" },{ ko:"í–‰ë³µí•œ", en:"happy" },
  { ko:"ë¹ ë¥¸", en:"fast" },{ ko:"ì²œì²œíˆ", en:"slowly" },{ ko:"ìš´ë™í•˜ë‹¤", en:"exercise" },
  { ko:"ì¤€ë¹„í•˜ë‹¤", en:"prepare" },{ ko:"í™•ì¸í•˜ë‹¤", en:"check" },{ ko:"ë„ì°©í•˜ë‹¤", en:"arrive" },
  { ko:"ë– ë‚˜ë‹¤", en:"leave" },{ ko:"ì„¤ëª…í•˜ë‹¤", en:"explain" },{ ko:"ê¸°ì–µí•˜ë‹¤", en:"remember" },
  { ko:"ê³„íš", en:"plan" },{ ko:"ê³µë¶€í•˜ë‹¤", en:"study" },{ ko:"ì¹œì ˆí•œ", en:"kind" },
  { ko:"ì–´ë ¤ìš´", en:"difficult" },{ ko:"ì¤‘ìš”í•œ", en:"important" },{ ko:"ì•ˆì „í•œ", en:"safe" },
  { ko:"ìœ„í—˜í•œ", en:"dangerous" },{ ko:"ì‹«ì–´í•˜ë‹¤", en:"dislike" }
];

const timerEl = document.getElementById("timer");
const scoreEl = document.getElementById("score");
const questionBox = document.getElementById("questionBox");
const startBtn = document.getElementById("startBtn");
const messageBox = document.getElementById("messageBox");
const targets = document.querySelectorAll(".target");
const barrelEl = document.querySelector(".m4-barrel");

let score = 0, correct = "", count = 0;
let timeLeft = 10, playing = false, timerId = null;

startBtn.onclick = () => startGame();

targets.forEach(t => {
  t.addEventListener("click", () => {
    if (!playing) return;
    const text = t.querySelector(".target-text").textContent.trim();
    // ê³µí†µ: ì´êµ¬ í™”ì—¼
    createMuzzleFlash();
    // ì •/ì˜¤ë‹µ ë¶„ê¸°
    if (text === correct) {
      // ì •ë‹µ: ì´ì•Œì´ ê³¼ë…ìœ¼ë¡œ
      createHitBullet(t);
      handleCorrect(t);
    } else {
      // ì˜¤ë‹µ: ì´ì•Œ ë¹—ë‚˜ê°
      createMissBullet();
      handleWrong(false);
    }
  });
});

function startGame() {
  score = 0;
  count = 0;
  playing = true;
  scoreEl.textContent = `ì ìˆ˜: ${score}`;
  startBtn.disabled = true;
  messageBox.textContent = "";
  loadNextQuestion();
}

function loadNextQuestion() {
  if (count >= 10) {
    endGame();
    return;
  }
  count++;

  // ê³¼ë… ì›ìƒ ë³µêµ¬
  targets.forEach(t => t.style.opacity = 1);

  const q = WORDS[Math.floor(Math.random() * WORDS.length)];
  correct = q.en;
  questionBox.textContent = q.ko;

  const opts = [correct];
  while (opts.length < 4) {
    const r = WORDS[Math.floor(Math.random() * WORDS.length)].en;
    if (!opts.includes(r)) opts.push(r);
  }
  opts.sort(() => Math.random() - 0.5);
  targets.forEach((t, i) => t.querySelector(".target-text").textContent = opts[i]);

  resetTimer();
}

function resetTimer() {
  clearInterval(timerId);
  timeLeft = 10;
  timerEl.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
  timerId = setInterval(() => {
    timeLeft--;
    timerEl.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
    if (timeLeft <= 0) {
      clearInterval(timerId);
      handleWrong(true);
    }
  }, 1000);
}

function handleCorrect(targetEl) {
  clearInterval(timerId);
  score++;
  scoreEl.textContent = `ì ìˆ˜: ${score}`;
  messageBox.textContent = `Correct! Score: ${score}`;
  messageBox.classList.add("flash-message");
  createFireworks();
  if (targetEl) createShatterAt(targetEl);
  setTimeout(() => {
    messageBox.textContent = "";
    messageBox.classList.remove("flash-message");
    if (playing) loadNextQuestion();
  }, 2000);
}

function handleWrong(isTimeout) {
  clearInterval(timerId);
  if (!isTimeout) score = Math.max(0, score - 1);
  scoreEl.textContent = `ì ìˆ˜: ${score}`;
  messageBox.textContent = `Try Again! Score: ${score}`;
  messageBox.classList.add("flash-message");
  createCryEmoji();
  setTimeout(() => {
    messageBox.textContent = "";
    messageBox.classList.remove("flash-message");
    if (playing) loadNextQuestion();
  }, 2000);
}

function endGame() {
  playing = false;
  clearInterval(timerId);
  messageBox.textContent = `ê²Œì„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜ ${score}ì . ë‹¤ì‹œ ì‹œì‘í•˜ë ¤ë©´ "ê²Œì„ ì‹œì‘"ì„ ëˆ„ë¥´ì„¸ìš”.`;
  questionBox.textContent = "ê²Œì„ì„ ì‹œì‘í•´ì£¼ì„¸ìš” :)";
  startBtn.disabled = false;
  timerEl.textContent = "ë‚¨ì€ ì‹œê°„: 10ì´ˆ";
}

/* ===== ì´í™íŠ¸ë“¤ ===== */

// ì´êµ¬ í™”ì—¼
function createMuzzleFlash() {
  if (!barrelEl) return;
  const rect = barrelEl.getBoundingClientRect();
  const fx = document.createElement("div");
  fx.className = "muzzle-flash";
  fx.style.left = rect.left + 5 + "px";
  fx.style.top = rect.top + rect.height/2 + "px";
  document.body.appendChild(fx);
  setTimeout(() => fx.remove(), 200);
}

// ì •ë‹µ: ì´ì•Œì´ ì •ë‹µ ê³¼ë…ìœ¼ë¡œ ë‚ ì•„ê°
function createHitBullet(targetEl) {
  if (!barrelEl) return;
  const barrelRect = barrelEl.getBoundingClientRect();
  const targetRect = targetEl.getBoundingClientRect();

  // ì‹œì‘ì  (ì´êµ¬)
  const startX = barrelRect.left + 5;
  const startY = barrelRect.top + barrelRect.height / 2;

  // ëª©í‘œì  (ê³¼ë… ì¤‘ì•™)
  const targetX = targetRect.left + targetRect.width / 2;
  const targetY = targetRect.top + targetRect.height / 2;

  const dx = targetX - startX;
  const dy = targetY - startY;

  const bullet = document.createElement("div");
  bullet.className = "bullet-hit";
  bullet.style.left = startX + "px";
  bullet.style.top = startY + "px";

  // ì´ì•Œ ê°ë„ ê³„ì‚°
  const angle = Math.atan2(dy, dx) * 180 / Math.PI;
  bullet.style.transform = `rotate(${angle}deg)`;

  document.body.appendChild(bullet);

  // ë‹¤ìŒ í”„ë ˆì„ì— ì‹¤ì œ ì´ë™(transition)
  requestAnimationFrame(() => {
    bullet.style.transition = "transform 0.35s linear";
    bullet.style.transform = `translate(${dx}px, ${dy}px) rotate(${angle}deg)`;
  });

  // ì œê±°
  setTimeout(() => {
    bullet.remove();
  }, 400);
}

// ì˜¤ë‹µ: ì™¼ìª½ìœ¼ë¡œ ë¹—ë‚˜ê°
function createMissBullet() {
  if (!barrelEl) return;
  const rect = barrelEl.getBoundingClientRect();
  const bullet = document.createElement("div");
  bullet.className = "bullet-miss";
  bullet.style.left = rect.left + 5 + "px";
  bullet.style.top = rect.top + rect.height/2 + "px";
  document.body.appendChild(bullet);
  setTimeout(() => bullet.remove(), 600);
}

// ì •ë‹µ ê³¼ë… ê¹¨ì§
function createShatterAt(targetEl) {
  const rect = targetEl.getBoundingClientRect();
  targetEl.style.opacity = 0.15;
  for (let i = 0; i < 8; i++) {
    const piece = document.createElement("div");
    piece.className = "shatter-piece";
    const x = rect.left + rect.width / 2;
    const y = rect.top + rect.height / 2;
    piece.style.left = x + "px";
    piece.style.top = y + "px";
    const dx = (Math.random() * 140 - 70) + "px";
    const dy = (Math.random() * 100 - 50) + "px";
    piece.style.setProperty("--dx", dx);
    piece.style.setProperty("--dy", dy);
    document.body.appendChild(piece);
    setTimeout(() => piece.remove(), 700);
  }
}

// ë¶ˆê½ƒë†€ì´
function createFireworks() {
  const c = document.createElement("div");
  c.className = "fireworks-container";
  for (let i = 0; i < 10; i++) {
    const f = document.createElement("div");
    f.className = "firework";
    const a = Math.random() * Math.PI * 2;
    const d = 70 + Math.random() * 50;
    f.style.setProperty("--tx", `${Math.cos(a)*d}px`);
    f.style.setProperty("--ty", `${Math.sin(a)*d}px`);
    c.appendChild(f);
  }
  document.body.appendChild(c);
  setTimeout(() => c.remove(), 2000);
}

// ìš°ëŠ” ì´ëª¨ì§€
function createCryEmoji() {
  const e = document.createElement("div");
  e.className = "cry-emoji";
  e.textContent = "ğŸ˜­";
  document.body.appendChild(e);
  setTimeout(() => e.remove(), 2000);
}
</script>
</body>
</html>
